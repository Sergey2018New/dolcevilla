---
import Icon from '@components/modules/Icon.astro';
import SwitchBlock from '@components/modules/SwitchBlock.astro';
import Swiper from '@components/modules/swiper/Swiper.astro';
import SwiperSlide from '@components/modules/swiper/SwiperSlide.astro';
import SwiperControl from '@components/modules/swiper/SwiperControl.astro';
import Filters from '@components/blocks/Filters.astro';

interface Props {
    id?: string;
    [x: string]: any;
}

const {
    id,
    ...rest
} = Astro.props;


const shedule = [
    {
        dateFrom: '02.12.2023',
        dateTo: '09.12.2023',
        period: '7 ночей',
        price: '€ 120',
    },
    {
        dateFrom: '16.12.2023',
        dateTo: '23.12.2023',
        period: '7 ночей',
        price: '€ 120',
    },
    {
        dateFrom: '09.12.2023',
        dateTo: '16.12.2023',
        period: '7 ночей',
        price: '€ 210',
    },
    {
        dateFrom: '23.12.2023',
        dateTo: '30.12.2023',
        period: '7 ночей',
        price: '€ 180',
    },
    {
        dateFrom: '23.12.2023',
        dateTo: '30.12.2023',
        period: '7 ночей',
        price: '€ 180',
    },
];
---

<section class="section availability" id={id} data-navigation-section>
	<div class="container">
        <h2 class="availability__title section-title">Цена и&nbsp;доступность</h2>
        <Filters type="availability" class="availability__filters"></Filters>
        <Swiper class="availability__slider js-slider-availability">
            <div slot="before" class="availability__slider-controls slider-controls">
                <SwiperControl class="availability__slider-prev slider-controls__prev js-slider-availability-prev" direction="prev"></SwiperControl>
                <SwiperControl class="availability__slider-next slider-controls__next js-slider-availability-next" direction="next" ></SwiperControl>
            </div>
            <SwiperSlide class="availability__slide">
                <div class="availability__shedule">
                    <div class="availability__shedule-title">Декабрь 2023</div>
                    <div class="availability__slide-row">
                        <div class="availability__slide-column">
                            <div class="availability__calendar">
                                <input
                                    type="hidden"
                                    class="availability__calendar-datepicker js-shedule-calendar"
                                    data-month="11"
                                    data-year="2023"
                                 />
                            </div>
                        </div>
                        <!-- data-disabled-dates='[{"from": "09.12.2023", "to": "16.12.2023"}]' -->
                        <div class="availability__slide-column">
                            <div class="availability__shedule-items">
                                {shedule.map((item, index) => (
                                    <div class={`availability__shedule-item${index === 0 ? ' is-active' : ''} ${index === 2 ? ' is-no-selected' : ''} js-select-period`}
                                        data-date-from={item.dateFrom}
                                        data-date-to={item.dateTo}
                                        data-price={item.price}
                                        data-period={item.period}
                                    >
                                        <div class="availability__shedule-dates">
                                            <div class="availability__shedule-date" set:html={'Cб&nbsp;' + item.dateFrom}></div>
                                            <div class="availability__shedule-date" set:html={'Cб&nbsp;' + item.dateTo}></div>
                                        </div>
                                        <div class="availability__shedule-info">
                                            <div class="availability__shedule-period" set:html={item.period}></div>
                                            <div class="availability__shedule-price" set:html={item.price}></div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            </SwiperSlide>
            <SwiperSlide class="availability__slide">
                <div class="availability__shedule">
                    <div class="availability__shedule-title">Январь 2024</div>
                    <div class="availability__slide-row">
                        <div class="availability__slide-column">
                            <div class="availability__calendar">
                                <input type="hidden" class="availability__calendar-datepicker js-shedule-calendar" data-month="0" data-year="2024" />
                            </div>
                        </div>
                        <div class="availability__slide-column">
                            <div class="availability__shedule-items">
                                {shedule.map((item, index) => (
                                   <Fragment>
                                        {
                                            index < 4 ?
                                            <div class={`availability__shedule-item js-select-period`}
                                                data-date-from={item.dateFrom}
                                                data-date-to={item.dateTo}
                                                data-price={item.price}
                                                data-period={item.period}
                                            >
                                                    <div class="availability__shedule-dates">
                                                        <div class="availability__shedule-date" set:html={'Cб&nbsp;' + item.dateFrom}></div>
                                                        <div class="availability__shedule-date" set:html={'Cб&nbsp;' + item.dateTo}></div>
                                                    </div>
                                                    <div class="availability__shedule-info">
                                                        <div class="availability__shedule-period" set:html={item.period}></div>
                                                        <div class="availability__shedule-price" set:html={item.price}></div>
                                                    </div>
                                                </div>
                                            : ''
                                        }
                                    </Fragment>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            </SwiperSlide>
            <SwiperSlide class="availability__slide">
                <div class="availability__shedule">
                    <div class="availability__shedule-title">Февраль 2024</div>
                    <div class="availability__slide-row">
                        <div class="availability__slide-column">
                            <div class="availability__calendar">
                                <input type="hidden" class="availability__calendar-datepicker js-shedule-calendar" data-month="1" data-year="2024"/>
                            </div>
                        </div>
                        <div class="availability__slide-column">
                            <div class="availability__shedule-items">
                                {shedule.map((item, index) => (
                                       <Fragment>
                                        {
                                            index < 4 ?
                                            <div class={`availability__shedule-item js-select-period`}
                                                data-date-from={item.dateFrom}
                                                data-date-to={item.dateTo}
                                                data-price={item.price}
                                                data-period={item.period}
                                            >
                                                    <div class="availability__shedule-dates">
                                                        <div class="availability__shedule-date" set:html={'Cб&nbsp;' + item.dateFrom}></div>
                                                        <div class="availability__shedule-date" set:html={'Cб&nbsp;' + item.dateTo}></div>
                                                    </div>
                                                    <div class="availability__shedule-info">
                                                        <div class="availability__shedule-period" set:html={item.period}></div>
                                                        <div class="availability__shedule-price" set:html={item.price}></div>
                                                    </div>
                                                </div>
                                            : ''
                                        }
                                    </Fragment>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            </SwiperSlide>
        </Swiper>

        <div class="availability__shedule availability__shedule_section">
            <div class="availability__shedule-title">Январь 2023</div>
            <div class="availability__shedule-items">
                {shedule.map((item, index) => (

                    <Fragment>
                        {
                            index < 4 ?
                            <div class={`availability__shedule-item${index === 1 ? ' is-no-selected' : ''} js-select-period`}
                            data-date-from={item.dateFrom}
                            data-date-to={item.dateTo}
                            data-price={item.price}
                            data-period={item.period}
                        >
                                <div class="availability__shedule-dates">
                                    <div class="availability__shedule-date" set:html={'Cб&nbsp;' + item.dateFrom}></div>
                                    <div class="availability__shedule-date" set:html={'Cб&nbsp;' + item.dateTo}></div>
                                </div>
                                <div class="availability__shedule-info">
                                    <div class="availability__shedule-period" set:html={item.period}></div>
                                    <div class="availability__shedule-price" set:html={item.price}></div>
                                </div>
                            </div>
                            : ''
                        }
                    </Fragment>
                ))}
            </div>
        </div>
        <div class="availability__shedule availability__shedule_section">
            <div class="availability__shedule-title">Февраль 2023</div>
            <div class="availability__shedule-items">
                {shedule.map((item, index) => (

                    <Fragment>
                        {
                            index < 4 ?
                            <div class={`availability__shedule-item js-select-period`}
                                data-date-from={item.dateFrom}
                                data-date-to={item.dateTo}
                                data-price={item.price}
                                data-period={item.period}
                            >
                                <div class="availability__shedule-dates">
                                    <div class="availability__shedule-date" set:html={'Cб&nbsp;' + item.dateFrom}></div>
                                    <div class="availability__shedule-date" set:html={'Cб&nbsp;' + item.dateTo}></div>
                                </div>
                                <div class="availability__shedule-info">
                                    <div class="availability__shedule-period" set:html={item.period}></div>
                                    <div class="availability__shedule-price" set:html={item.price}></div>
                                </div>
                            </div>
                            : ''
                        }
                    </Fragment>
                ))}
            </div>
        </div>
	</div>
</section>
